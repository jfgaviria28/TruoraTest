# RAG Document: `raw_hubspot_leads.csv`

## 1. Source Description & Gist

- **File Name**: `raw_hubspot_leads.csv`
- **Data Source**: Simulates lead data from a CRM like **HubSpot**.
- **High-Level Purpose**: This file tracks potential customers, their status in the sales funnel, and their potential deal value. It is a core component for measuring the quality of leads generated by marketing campaigns.
- **Agent's Primary Goal**: To ingest and clean this data, specifically handling non-standard values in both categorical (`status`) and numeric (`deal_amount`) fields. The agent must standardize these fields before the data can be used for analysis or joined with other sources.

## 2. File Structure & Schema

### Clean Data Profile

- **Location**: `data/raw_hubspot_leads.csv`
- **Schema**:
    - `lead_id`: `TEXT`, The unique identifier for the lead.
    - `user_uid`: `TEXT`, The user identifier for joining with analytics data.
    - `campaign_id`: `TEXT`, The campaign that generated the lead.
    - `status`: `TEXT`, The lead's status (e.g., "New", "Contacted", "Qualified").
    - `deal_amount`: `DECIMAL`, The potential value of the lead.
- **Generation Logic**: A base of **3,000 lead records** is generated. The `status` is chosen randomly, and a `deal_amount` is generated from an exponential distribution.

### Realistic Data Profile (with Entropy)

The `add_entropy.py` script introduces data quality issues to test the agent's cleaning capabilities.

- **Key Transformations**:
    1.  **Unknown Statuses**: For a random **8% of rows**, the `status` is replaced with the string `'UNKNOWN'`, representing ambiguous or improperly categorized leads.
    2.  **Missing Numeric Values**: For a random **3% of rows**, the `deal_amount` is replaced with the string `'N/A'`, simulating exports where numeric data is missing and represented as text.

- **Resulting Realistic Schema**:
    - `lead_id`: `TEXT`
    - `user_uid`: `TEXT`
    - `campaign_id`: `TEXT`
    - `status`: `TEXT` (can contain 'UNKNOWN').
    - `deal_amount`: `TEXT` (data type changes to accommodate `'N/A'`).

- **Example of Realistic Data**:

  | lead_id  | user_uid | campaign_id | status    | deal_amount |
  |----------|----------|-------------|-----------|-------------|
  | lead_abc | user_a   | CID_f9e8d7  | Qualified | 500.25      |
  | lead_def | user_b   | CID_a1b2c3  | UNKNOWN   | 250.75      |
  | lead_ghi | user_c   | CID_c4d5e6  | New       | N/A         |

## 3. Key Challenges & Instructions for AI Agent

1.  **Standardize `status` Column**: The agent needs a strategy for the `'UNKNOWN'` statuses.
    - **Detection**: Identify all rows where `status = 'UNKNOWN'`.
    - **Strategy**: The appropriate action depends on the analysis.
        - **Filtering**: For a strict funnel analysis, the agent might filter these records out.
        - **Re-categorization**: A more advanced agent could potentially re-categorize them based on other user activity, but for this dataset, treating them as a distinct category or filtering them is sufficient.
        - **Default**: Treat `'UNKNOWN'` as a valid, separate status category for reporting.
2.  **Clean and Cast `deal_amount` (Critical Path)**: The agent must handle the `'N/A'` values in the `deal_amount` column.
    - **Detection**: Identify all rows where `deal_amount` is not a valid number.
    - **Imputation**: Replace `'N/A'` with a numeric value. `0` is a safe and standard choice, as it will not affect financial sums. `NULL` is also an acceptable choice.
    - **Type Conversion**: After cleaning, the agent MUST cast the entire `deal_amount` column from `TEXT`/`OBJECT` to a `DECIMAL` or `FLOAT` type. Failure to do this will cause errors in any downstream calculations.
3.  **No Deduplication Needed**: Unlike the Intercom data, this file does not have a duplicate record problem. The agent should focus solely on the column-level data quality issues. 